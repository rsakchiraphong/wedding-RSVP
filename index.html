<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elegant Wedding RSVP System</title>
    <style>
        :root {
            --primary-color: #4a90e2;
            --secondary-color: #f5a623;
            --background-color: #f9f9f9;
            --text-color: #333;
            --error-color: #e74c3c;
            --success-color: #2ecc71;
        }
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1, h2 {
            color: var(--primary-color);
            text-align: center;
        }
        input, select {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        button {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }
        button:hover {
            background-color: #3a7bd5;
        }
        .guest-list {
            margin-top: 30px;
        }
        .guest-item {
            background-color: #f1f1f1;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .guest-info {
            flex-grow: 1;
        }
        .guest-actions button {
            margin-left: 10px;
        }
        .error {
            color: var(--error-color);
            margin-bottom: 15px;
        }
        .success {
            color: var(--success-color);
            margin-bottom: 15px;
        }
        #searchInput {
            margin-bottom: 20px;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Elegant Wedding RSVP</h1>
        <div id="messageArea"></div>
        <input type="text" id="searchInput" placeholder="Search guests...">
        <div id="guestList" class="guest-list"></div>
        <button id="showAddForm">Add New Guest</button>
        <div id="addGuestForm" class="hidden">
            <h2>Add New Guest</h2>
            <input type="text" id="firstName" placeholder="First Name" required>
            <input type="text" id="lastName" placeholder="Last Name" required>
            <input type="date" id="arrivalDate" required>
            <input type="text" id="arrivalFlight" placeholder="Arrival Flight">
            <input type="time" id="arrivalTime">
            <input type="date" id="departureDate">
            <input type="text" id="departureFlight" placeholder="Departure Flight">
            <input type="time" id="departureTime">
            <input type="text" id="passportNumber" placeholder="Passport Number">
            <input type="tel" id="phoneNumber" placeholder="Phone Number">
            <select id="dietaryPreference">
                <option value="">Select Dietary Preference</option>
                <option value="V">Vegetarian</option>
                <option value="N">Non-Vegetarian</option>
            </select>
            <button id="addGuest">Add Guest</button>
        </div>
    </div>

    <script>
    class Guest {
        constructor(firstName, lastName, arrivalDate, arrivalFlight, arrivalTime, departureDate, departureFlight, departureTime, passportNumber, phoneNumber, dietaryPreference) {
            this.id = Date.now().toString(36) + Math.random().toString(36).substr(2);
            this.firstName = firstName;
            this.lastName = lastName;
            this.arrivalDate = arrivalDate;
            this.arrivalFlight = arrivalFlight;
            this.arrivalTime = arrivalTime;
            this.departureDate = departureDate;
            this.departureFlight = departureFlight;
            this.departureTime = departureTime;
            this.passportNumber = passportNumber;
            this.phoneNumber = phoneNumber;
            this.dietaryPreference = dietaryPreference;
        }
    }

    class RSVPSystem {
        constructor() {
            this.guests = [];
            this.loadGuests();
            this.setupEventListeners();
            this.renderGuestList();
        }

        loadGuests() {
            const savedGuests = localStorage.getItem('weddingGuests');
            if (savedGuests) {
                this.guests = JSON.parse(savedGuests);
            }
        }

        saveGuests() {
            localStorage.setItem('weddingGuests', JSON.stringify(this.guests));
        }

        addGuest(guest) {
            this.guests.push(guest);
            this.saveGuests();
            this.renderGuestList();
            this.showMessage('Guest added successfully!', 'success');
        }

        updateGuest(id, updatedInfo) {
            const index = this.guests.findIndex(guest => guest.id === id);
            if (index !== -1) {
                this.guests[index] = { ...this.guests[index], ...updatedInfo };
                this.saveGuests();
                this.renderGuestList();
                this.showMessage('Guest updated successfully!', 'success');
            }
        }

        deleteGuest(id) {
            this.guests = this.guests.filter(guest => guest.id !== id);
            this.saveGuests();
            this.renderGuestList();
            this.showMessage('Guest deleted successfully!', 'success');
        }

        renderGuestList() {
            const guestList = document.getElementById('guestList');
            guestList.innerHTML = '';
            this.guests.forEach(guest => {
                const guestElement = document.createElement('div');
                guestElement.className = 'guest-item';
                guestElement.innerHTML = `
                    <div class="guest-info">
                        <strong>${guest.firstName} ${guest.lastName}</strong><br>
                        Arrival: ${guest.arrivalDate} ${guest.arrivalTime} (${guest.arrivalFlight})<br>
                        Departure: ${guest.departureDate} ${guest.departureTime} (${guest.departureFlight})
                    </div>
                    <div class="guest-actions">
                        <button onclick="rsvpSystem.editGuest('${guest.id}')">Edit</button>
                        <button onclick="rsvpSystem.deleteGuest('${guest.id}')">Delete</button>
                    </div>
                `;
                guestList.appendChild(guestElement);
            });
        }

        editGuest(id) {
            const guest = this.guests.find(g => g.id === id);
            if (guest) {
                document.getElementById('firstName').value = guest.firstName;
                document.getElementById('lastName').value = guest.lastName;
                document.getElementById('arrivalDate').value = guest.arrivalDate;
                document.getElementById('arrivalFlight').value = guest.arrivalFlight;
                document.getElementById('arrivalTime').value = guest.arrivalTime;
                document.getElementById('departureDate').value = guest.departureDate;
                document.getElementById('departureFlight').value = guest.departureFlight;
                document.getElementById('departureTime').value = guest.departureTime;
                document.getElementById('passportNumber').value = guest.passportNumber;
                document.getElementById('phoneNumber').value = guest.phoneNumber;
                document.getElementById('dietaryPreference').value = guest.dietaryPreference;

                document.getElementById('addGuest').textContent = 'Update Guest';
                document.getElementById('addGuest').onclick = () => this.submitGuestEdit(id);
                document.getElementById('addGuestForm').classList.remove('hidden');
            }
        }

        submitGuestEdit(id) {
            const updatedInfo = {
                firstName: document.getElementById('firstName').value,
                lastName: document.getElementById('lastName').value,
                arrivalDate: document.getElementById('arrivalDate').value,
                arrivalFlight: document.getElementById('arrivalFlight').value,
                arrivalTime: document.getElementById('arrivalTime').value,
                departureDate: document.getElementById('departureDate').value,
                departureFlight: document.getElementById('departureFlight').value,
                departureTime: document.getElementById('departureTime').value,
                passportNumber: document.getElementById('passportNumber').value,
                phoneNumber: document.getElementById('phoneNumber').value,
                dietaryPreference: document.getElementById('dietaryPreference').value
            };
            this.updateGuest(id, updatedInfo);
            this.resetForm();
        }

        resetForm() {
            document.getElementById('addGuestForm').reset();
            document.getElementById('addGuest').textContent = 'Add Guest';
            document.getElementById('addGuest').onclick = () => this.submitNewGuest();
            document.getElementById('addGuestForm').classList.add('hidden');
        }

        submitNewGuest() {
            const newGuest = new Guest(
                document.getElementById('firstName').value,
                document.getElementById('lastName').value,
                document.getElementById('arrivalDate').value,
                document.getElementById('arrivalFlight').value,
                document.getElementById('arrivalTime').value,
                document.getElementById('departureDate').value,
                document.getElementById('departureFlight').value,
                document.getElementById('departureTime').value,
                document.getElementById('passportNumber').value,
                document.getElementById('phoneNumber').value,
                document.getElementById('dietaryPreference').value
            );
            this.addGuest(newGuest);
            this.resetForm();
        }

        searchGuests() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const filteredGuests = this.guests.filter(guest => 
                Object.values(guest).some(value => 
                    value.toString().toLowerCase().includes(searchTerm)
                )
            );
            this.renderFilteredGuestList(filteredGuests);
        }

        renderFilteredGuestList(filteredGuests) {
            const guestList = document.getElementById('guestList');
            guestList.innerHTML = '';
            filteredGuests.forEach(guest => {
                const guestElement = document.createElement('div');
                guestElement.className = 'guest-item';
                guestElement.innerHTML = `
                    <div class="guest-info">
                        <strong>${guest.firstName} ${guest.lastName}</strong><br>
                        Arrival: ${guest.arrivalDate} ${guest.arrivalTime} (${guest.arrivalFlight})<br>
                        Departure: ${guest.departureDate} ${guest.departureTime} (${guest.departureFlight})
                    </div>
                    <div class="guest-actions">
                        <button onclick="rsvpSystem.editGuest('${guest.id}')">Edit</button>
                        <button onclick="rsvpSystem.deleteGuest('${guest.id}')">Delete</button>
                    </div>
                `;
                guestList.appendChild(guestElement);
            });
        }

        showMessage(message, type) {
            const messageArea = document.getElementById('messageArea');
            messageArea.textContent = message;
            messageArea.className = type;
            setTimeout(() => {
                messageArea.textContent = '';
                messageArea.className = '';
            }, 3000);
        }

        setupEventListeners() {
            document.getElementById('showAddForm').addEventListener('click', () => {
                document.getElementById('addGuestForm').classList.toggle('hidden');
            });
            document.getElementById('addGuest').addEventListener('click', () => this.submitNewGuest());
            document.getElementById('searchInput').addEventListener('input', () => this.searchGuests());
        }
    }

    const rsvpSystem = new RSVPSystem();
    </script>
</body>
</html>
